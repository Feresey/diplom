# CREATE TYPE family_type ENUM ('native', 'adopted');
# CREATE TABLE peoples (
#   id SERIAL PRIMARY KEY,
#   name VARCHAR(50)
# );
# CREATE TABLE families (
#   id SERIAL PRIMARY KEY,
#   parent_id INTEGER REFERENCES peoples(id),
#   child_id  INTEGER REFERENCES peoples(id),
#   family_type family_type NOT NULL
# );

tables:
- table: peoples
  requirements:
    # будет добавлена запись, где значение name такие же, как в другой записи этой таблицы
    - duplicate: [name]
  columns:
    - column: person_name
      values: persons.txt
    - column: registration_date
      skip: true
- table: parent_to_child
  requirements:
    # - add-variants:
        # left-columns: [child_id]
    # - duplicate: [parent_id]
    #   unique: [child_id, family_type]
    # - duplicate: [child_id, family_type]

SELECT MAX(COUNT(parent_id)) FROM peoples GROUP BY parent_id;
